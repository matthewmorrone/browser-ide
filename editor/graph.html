<html>
<head>
<script src="jquery.js"></script>
<script>
$(function()
{
	$(".popup").remove()
	var popup = $(".displayed").append("<div id='networkgraph' class='popup'></div>")
	pressedP = false
	$("#networkgraph").css(
	{
		"position":"fixed", 
		"left":"150px", 
		"top":"150px", 
		"width":"320px", 
		"height":"340px", 
		"z-index":"5", 
		"background-color":"black", 
		"border":"none"
	}) 
	$("#networkgraph").mousedown(function(e)
	{
		startP = $(this)
		startPX = e.pageX
		startPY = e.pageY
		pressedP = true
	})
	$(document).mousemove(function(e) {if (pressedP == true) {startP.css({"left": (startPX+(e.pageX-startPX))-($("#networkgraph").width()/2), "top":  (startPY+(e.pageY-startPY))-($("#networkgraph").height()/2)})}})
	$(document).mouseup(function(e) {pressedP = false; $("#networkgraph").css("cursor", "")})
	$("#networkgraph").html("<canvas id='graphcanvas' width='300px' height='300px'></canvas>") //class='control'
	$("#graphcanvas").after("<button id='savegraph'>Save</button><button id='closegraph'>Close</button>")
	
	

	
	$("#graphcanvas").css(
	{
		"background-color":"white", 
		"margin-top":"10px", 
		"margin-left":"10px",
	})
	$("#savegraph").click(function()
	{
		window.open(c.canvas.toDataURL('image/png'), '_blank')
	})
	$("#closegraph").click(function() 
	{
		$("#networkgraph").remove()
	})
	
	
	var twodarray = []
	for (var j = 1; j <= 10; j++)
	{
		var row = []
		for (var i = 1; i <= 10; i++)
		{
			var cell = $(".displayed tr").eq(j).children().eq(i).children(".cell")
			if (!cell.hasClass("selected")) 
			{
				continue
			}
			if (cell.val() != "")
			{
				row.push(cell.val())
			}
		}
		twodarray.push(row)
	}        
	
	var points = []
	for (var i in twodarray)
	{
		var rx = 10+parseInt(Math.random()*280)
		var ry = 10+parseInt(Math.random()*280)
		points.push([rx, ry])
	} 
	for (var i in twodarray)
	{
		var point1 = points[i]
		for (var j in twodarray[i])
		{
			if (j == 0) 
			{
				continue
			}
			var point2 = points[j]
			c.beginPath()
			c.moveTo(points[i][0], points[i][1])
			c.lineTo(points[j][0], points[j][1])
			c.fillStyle = "black"
			c.stroke()
		}
	}  
	for (var i in twodarray)
	{
		rx = points[i][0]
		ry = points[i][1]
		c.font = "bold 14px sans-serif"
		
		c.beginPath()
		c.arc(rx, ry, 10, Math.PI, -Math.PI, false)
		c.stroke() 
				   
		c.beginPath()
		c.arc(rx, ry, 10, Math.PI, -Math.PI, false)
		c.fillStyle = "white"
		c.lineTo(150,150)
		c.fill()
		
		c.fillStyle = "black"
		c.textAlign = "center"
		c.textBaseline = "middle"
		c.fillText(twodarray[i][0], rx, ry)
	}     


canvas = document.getElementById("canvas")
c = canvas.getContext("2d")  


twodarray = [[1, 2, 4, 6, 8, 10], [2, 1, 4, 10], [3, 5, 6, 7], [4, 1, 6, 8, 10], [5, 3, 7, 9], [6, 10, 1, 2, 3, 4], [7, 3, 5], [8, 1, 4], [9, 5], [10, 1, 2, 4]]

edges = Array()
for (i in twodarray)
{
	for (j in twodarray[i])
	{
		//edges.indexOf([twodarray[i][j], twodarray[i][0]])
		//twodarray[i][0] != twodarray[i][j]
		edges.push([twodarray[i][0], twodarray[i][j]])	
	}
}
var vertices = []
for (var i in twodarray)
{
	var rx = 10+parseInt(Math.random()*280)
	var ry = 10+parseInt(Math.random()*280)
	vertices.push([rx, ry])
}
for (var i in vertices)
{
	c.beginPath()
	c.arc(vertices[i][0], vertices[i][1], 5, Math.PI, -Math.PI, false)
	c.stroke() 
	c.fill()
}    
for (var i in edges)
{
	c.beginPath()
	point1 = vertices[edges[i][0]-1]
	point2 = vertices[edges[i][1]-1]
	
	x1 = point1[0]
	y1 = point1[1]
	x2 = point2[0]
	y2 = point2[1]
	
	c.moveTo(x1, y1)
	c.lineTo(x2, y2)
	
	c.strokeStyle = "black"
	c.stroke()	
	c.closePath()
	//$.alert(x1, y1, x2, y2)
} 


})
</script>
</head>
<body>
<canvas id="canvas" height=300 width=300></canvas>

</body>
</html>