<html>
	<head>
		<title>Layout Generator</title>
		<link rel="shortcut icon" type="image/x-icon" href="" id="favicon"></link>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="jqueryui.js"></script>
		<link rel="stylesheet" type="text/css" href="styles.css"></link>
		<link rel="stylesheet" type="text/css" href="jqueryui/css/base/jquery-ui.css" id="themecss" />	
	</head>
	<body>
		<script>
		function hexFromRGB(r, g, b) 
		{
			var hex = [r.toString(16), g.toString(16), b.toString(16)]
			$.each(hex, function(nr, val) 
			{
				if (val.length === 1) 
				{
					hex[nr] = "0" + val
				}
			})
			return hex.join("").toUpperCase()
		}
		function setcolor() 
		{
			var r = $("#red").slider("value")
			var g = $("#green").slider("value")
			var b = $("#blue").slider("value")
			var hex = hexFromRGB(r, g, b)
			var colorsel = $("#selectdom").val()
			var background = $("#background").val()
			changecolor(colorsel, background, hex)
			var caretpos = $("#colorin")[0].selectionStart
			$("#colorin").val("rgb("+r+", "+g+", "+b+")")	
			$("#colorin")[0].setSelectionRange(caretpos, caretpos)
		}
		function changecolor(selectdom, css, hex)
		{
			if (css == "background-color")
			{
				$(selectdom).css({"background-color":"#"+hex})
			}
			if (css == "color")
			{
				$(selectdom).css({"color":"#"+hex})
			}
		}
		function uniqueop(input)
		{
			var usedNames = {}
			$(input+" > option").each(function() 
			{
				if(usedNames[this.text]) 	{$(this).remove()} 
				else 						{usedNames[this.text] = this.value}
			})
		}
        $(function()
        {
        	$.post("cssgen.php", {"var1":"computer", "var2":"programming"},
        	function(data)
        	{
        		alert(data)
        	},
        	"text")
        	$("table").toggle(
        	
        	function()
        	{
        		$(this).css({"color":"green", "font-family":"verdana"})
        	},
        	function()
        	{
        		$(this).css({"color":"red", "font-family":"arial"})
        	}
        	
        	
        	)
            $("#settitle").keyup(function()
            {
                var title = $(this).val() ? $(this).val() : "Layout Generator"
                $("title").html($(this).val())
            })
            $(".iconimg").click(function()
            {
                $("#favicon").attr("href", $(this).attr("src"))
            })
			$(".color").slider({
				range: "min",
				max: 255,
				value: 255,
				slide: setcolor//,
				//change: setcolor
			})
			$('body *').each(function()
			{
				if ($(this)[0].tagName == "SCRIPT") {return}
				$('#selectdom').append('<option>'+$(this)[0].tagName+'</option>')
				uniqueop("#selectdom")
			})
			$("#selectdom").change(function()
			{
				var selectdom = $("#selectdom").val()
				var background = $("#background").val()
				var hex = $(selectdom).css(background).split(/[\s,)(]+/)
				if (hex.length < 4) {return}
				$("#red").slider("value", hex[1])
				$("#green").slider("value", hex[2])
				$("#blue").slider("value", hex[3])
				
				$("#colorin").val($(selectdom).css(background))	
			})
// 			$("a").css("margin")
// 			$("a")[0].style.margin = "20px"
			$("#selectdom").change()
// 			$("#colorin").keyup(function()
// 			{
// 				var selectdom = $("#selectdom").val()
// 				var background = $("#background").val()
// 				var hex = $(this).val()
// 				$(selectdom).css(background, hex)
// 				hex = hex.split(/[\s,)(]+/)
// 				$("#red").slider("value", hex[1])
// 				$("#green").slider("value", hex[2])
// 				$("#blue").slider("value", hex[3])
// 			})
		})
		</script>
		<div id="header">
			<ul>
				<li><a href="jquery.js">JQuery</a></li>
				<li><a href="jqueryui.js">JQueryUI</a></li>
				<li><a href="styles.css">Stylesheet</a></li>
				<li><a href="icons">Icons</a></li>
			<ul>
		</div>
		<div id="contents">
			<table>
				<tr><th colspan="3"><input id="settitle" type="text"></input></th></tr>
				<tr><td><img class="iconimg" src="Arrow-Up-Left.png"></img></td><td><img class="iconimg" src="Arrow-Up.png"></img></td><td><img class="iconimg" src="Arrow-Up-Right.png"></img></td></tr>
				<tr><td><img class="iconimg" src="Arrow-Left.png"></img></td><td><img class="iconimg" src="Black-Star.png"></img></td><td><img class="iconimg" src="Arrow-Right.png"></img></td></tr>
				<tr><td><img class="iconimg" src="Arrow-Down-Left.png"></img></td><td><img clas="iconimg" src="Arrow-Down.png"></img></td><td><img class="iconimg" src="Arrow-Down-Right.png"></img></td></tr>
			</table>
        </div>
		<div id="footer">
			<select id="selectdom"><option>BODY</option><option>A</option><option>TABLE</option><option>UL</option><option>INPUT</option><option>BUTTON</option><option>SELECT</option><option>OPTION</option></select>
			<select id="background"><option>background-color</option><option>color</option></select>
			<input type="text" id="colorin"></input>
			<div id="red" class="color"></div>
			<div id="green" class="color"></div>
			<div id="blue" class="color"></div>
		</div>
	</body>
</html>
